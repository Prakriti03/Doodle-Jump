var m=Object.defineProperty;var f=(o,t,r)=>t in o?m(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r;var e=(o,t,r)=>(f(o,typeof t!="symbol"?t+"":t,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const h of i)if(h.type==="childList")for(const p of h.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&l(p)}).observe(document,{childList:!0,subtree:!0});function r(i){const h={};return i.integrity&&(h.integrity=i.integrity),i.referrerPolicy&&(h.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?h.credentials="include":i.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function l(i){if(i.ep)return;i.ep=!0;const h=r(i);fetch(i.href,h)}})();const n={CANVAS_WIDTH:450,CANVAS_HEIGHT:650};class g{constructor(){e(this,"posX");e(this,"posY");e(this,"velocity");e(this,"gravity");e(this,"jumpStrength");e(this,"isJumping");e(this,"hasJumpedOnce");e(this,"doodlerImg");e(this,"width");e(this,"height");this.posX=10,this.posY=300,this.velocity=0,this.gravity=.4,this.jumpStrength=-10,this.isJumping=!1,this.hasJumpedOnce=!1,this.doodlerImg=new Image,this.doodlerImg.src="blueR.png",this.width=60,this.height=60}draw(){a.drawImage(this.doodlerImg,this.posX,this.posY,this.width,this.height)}moveLeft(){this.posX+this.width<0&&(this.posX=n.CANVAS_WIDTH),this.posX-=5}moveRight(){this.posX+=5,this.posX>n.CANVAS_WIDTH&&(this.posX=-this.width)}jump(){this.isJumping||(this.isJumping=!0,this.velocity=this.jumpStrength)}}class y{constructor(t,r){e(this,"x");e(this,"y");e(this,"height");e(this,"width");e(this,"platformImg");this.x=t,this.y=r,this.height=15,this.width=60,this.platformImg=new Image,this.platformImg.src="platform.png"}draw(){a.drawImage(this.platformImg,this.x,this.y,this.width,this.height)}}function c(o){const t=Math.floor(Math.random()*(s.width-60));return new y(t,o)}class u{constructor(t){e(this,"ctx");e(this,"score");this.ctx=t,this.score=0}increment(){this.score+=10,this.draw(),console.log(this.score)}draw(){this.ctx.fillStyle="white",this.ctx.font="20px Proxima Nova";let t=20,r=30;console.log({x:t,y:r}),this.ctx.fillText(`Score: ${this.score}`,t,r)}}class d{constructor(){e(this,"player");e(this,"platforms");e(this,"isGameOver");e(this,"threshold");e(this,"backgroundImg");e(this,"score");this.player=new g,this.platforms=[],this.isGameOver=!1,this.threshold=s.height/2,this.backgroundImg=new Image,this.backgroundImg.src="bg.png",this.score=new u(a)}createInitialPlatforms(t,r){let l=r/t;for(let i=0;i<t;i++){let h=r-(i+1)*l;this.platforms.push(c(h))}}checkCollision(){for(let t of this.platforms)if(this.player.posY+this.player.height>=t.y&&this.player.posY+this.player.height<=t.y+t.height&&this.player.posX+this.player.width>t.x&&this.player.posX<t.x+t.width)return this.player.hasJumpedOnce=!0,t;return null}drawGameOver(){a.clearRect(0,0,s.width,s.height),a.font="48px Arial",a.fillStyle="red",a.textAlign="center",a.fillText("Game Over",s.width/2,s.height/2),a.font="30px Proxima Nova",a.fillStyle="red",a.textAlign="center",a.fillText("Press Enter to Restart",s.width/2,s.height/2+50),requestAnimationFrame(this.drawGameOver.bind(this))}update(){if(this.isGameOver)return;this.player.velocity+=this.player.gravity,this.player.posY+=this.player.velocity;const t=this.checkCollision();if(t&&this.player.velocity>0&&(this.player.posY=t.y-this.player.height,this.player.velocity=this.player.jumpStrength),this.player.hasJumpedOnce&&this.player.posY>s.height-60){this.isGameOver=!0,this.drawGameOver();return}if(this.player.posY>s.height-this.player.height&&(this.player.posY=s.height-this.player.width,this.player.isJumping=!1,this.player.jump()),this.player.posY<this.threshold){let r=this.threshold-this.player.posY;this.player.posY=this.threshold,this.platforms.forEach(h=>{h.y+=r});const l=this.platforms.length;for(this.platforms=this.platforms.filter(h=>h.y<s.height),l-this.platforms.length>0&&this.score.increment();this.platforms.length<6;){let h=this.platforms.length>0?this.platforms[this.platforms.length-1].y-Math.floor(Math.random()*80+20):s.height-60;this.platforms.push(c(h))}}a.drawImage(this.backgroundImg,0,0,s.width,s.height),this.player.posX+this.player.width<0&&(this.player.posX=s.width),this.player.posX>s.width&&(this.player.posX=-60),this.score.draw(),this.player.draw(),this.platforms.forEach(r=>r.draw()),requestAnimationFrame(this.update.bind(this))}start(){window.addEventListener("keydown",t=>{if(!this.isGameOver)switch(t.key){case"ArrowLeft":this.player.moveLeft();break;case"ArrowRight":this.player.moveRight();break;case" ":this.player.jump();break}}),this.createInitialPlatforms(6,s.height),this.player.doodlerImg.onload=()=>{console.log("loaded"),this.backgroundImg.onload=()=>{this.update()}}}}const s=document.querySelector("#gameCanvas"),a=s.getContext("2d"),w=document.getElementById("start-screen"),I=document.getElementById("start-button");s.height=n.CANVAS_HEIGHT;s.width=n.CANVAS_WIDTH;I.addEventListener("click",()=>{w.style.display="none",s.style.display="flex",new d().start()});window.addEventListener("keydown",o=>{const t=new d;o.key==="Enter"&&t.start()});
